{% extends "dashboard/base.html" %}

{% block title %}
<title>–°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π</title>
{% endblock %}

{% block content %}
<h2>–°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π</h2>

{% if current_user.is_authenticated %}
<div>
    <a href="{{ url_for('create') }}" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</a>
</div>
{% endif %}

{% if share_list %}
<table class="table table-striped">
    <thead>
    <tr>
        <th scope="col">–¢–∏–∫–µ—Ä</th>
        <th scope="col">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th scope="col">ISIN</th>
        <th scope="col">–¶–µ–Ω–∞ / –¢—Ä–µ–Ω–¥</th>
        {% if current_user.is_authenticated %}
        <th scope="col">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
        {% endif %}
    </tr>
    </thead>
    <tbody>

    {% for share in share_list %}
    <tr>
        <td><a href="{{ url_for('detail', share_id=share.id) }}"> {{share.ticker}} </a></td>
        <td>{{share.name}}</td>
        <td>{{share.isin}}</td>
        {% if share.is_trend_high is true %}
        <td style="background-color: mediumseagreen">
            {% elif share.is_trend_high is false %}
        <td style="background-color: palevioletred">
            {% else %}
        <td>
            {% endif %}
            {{share.last_price or 0}} {{ share.currency or "" }}
            {% if share.is_trend_high is true %} üìà
            {% elif share.is_trend_high is false %} üìâ
            {% endif %}
        </td>
        {% if current_user.is_authenticated %}
        <td>
            <a href="{{ url_for('update', share_id=share.id) }}" class="btn btn-secondary btn-sm">
                –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
            </a>
            <a href="{{ url_for('delete', share_id=share.id) }}" class="btn btn-danger btn-sm">
                –£–¥–∞–ª–∏—Ç—å
            </a>
        </td>
        {% endif %}
    </tr>
    {% endfor %}

    </tbody>
</table>

<div class="btn-group mb-3" role="group" aria-label="Item pagination">
    {% if page_obj.has_prev %}
    <a href="{{ url_for('index', page=page_obj.prev_num) }}" class="btn btn-outline-primary">&laquo;</a>
    {% endif %}

    {% for page_number in page_obj.iter_pages() %}
    {% if page_number %}
    {% if page_obj.page == page_number %}
    <button class="btn btn-outline-primary active">
        <span>{{ page_number }} <span class="sr-only">(current)</span></span>
    </button>
    {% else %}
    <a href="{{ url_for('index', page=page_number) }}" class="btn btn-outline-primary">
        {{ page_number }}
    </a>
    {% endif %}
    {% else %}
    ...
    {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
    <a href="{{ url_for('index', page=page_obj.next_num) }}" class="btn btn-outline-primary">&raquo;</a>
    {% endif %}
</div>

{% else %}
<p>–ê–∫—Ü–∏–π –µ—â–µ –Ω–µ—Ç. {% if current_user.is_authenticated %} –í—ã –º–æ–∂–µ—Ç–µ <a href="{{ url_for('create') }}">–¥–æ–±–∞–≤–∏—Ç—å</a> –ø–µ—Ä–≤—É—é.{% endif %}</p>
{% endif %}

{% endblock %}